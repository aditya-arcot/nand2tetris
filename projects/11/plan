
expressions
codeWrite(exp):
  if exp is number n:
    output "push n"
  if exp is variable var:
    output "push var"
  if exp is "exp1 op exp2":
    codeWrite(exp1)
    codeWrite(exp2)
    output "op"
  if exp is "op exp":
    codeWrite(exp)
    output "op"
  if exp is "f(exp1, exp2, ...)":
    codeWrite(exp1)
    codeWrite(exp2)
    ...
    output "call f"

if
  compiled (expression)
  not			// negating makes implementation easier
  if-goto L1
  compiled (statements1)
  goto L2
label L1
  compiled (statements2)
label L2

while
label L1
  compiled (expression)
  not
  if-goto L2
  compiled (statements)
  goto L1
label L2
